{% extends 'base.html' %}
{% load staticfiles %}
{% block mainbody %}
    <script type="text/javascript">
        $(window).scroll(function () {
            var scrollTop = $(this).scrollTop();
            var scrollHeight = $(document).height();
            var windowHeight = $(this).height();
            if (scrollTop + windowHeight === scrollHeight) {
                const page = Number($("#more_blog").attr("current_page"));
                if (page > 0){
                $.ajax({
                type:'GET',
                dataType:'json',
                url:'{% url 'blog:ajax' 'blogs'  %}?page='+page,
                success:function(data){
                        $("#more_blog").append(data.rendered);
                        $("#more_blog").attr("current_page", data.page);
                    }
                    });
                }
            }
        });
    </script>
<div class="jumbotron p-4 p-md-5 text-white rounded bg-purple">
    <div class="col-md-6 px-0">
      <h1 class="display-4 font-italic">dreaming等你</h1>
      {% if blog_index %}
      <p class="lead my-3">{{ blog_index.description }}</p>
        <p class="lead mb-0"><a href="{% url 'blog:blog' blog_index.blog_id %}" class="text-white font-weight-bold">了解更多...</a></p>
        {% else %}
        <p class="lead my-3">欢迎</p>
        {% endif %}    
    </div>
</div>
<article>
<main role="main" class="container">
  <div class="d-flex align-items-center p-3 my-3 text-white-50 bg-purple rounded shadow-sm">
    <div class="lh-100">
      <h6 class="mb-0 text-white lh-100">DREAMING</h6>
      <small>Since 2019</small>
    </div>
  </div>

  <div class="my-3 p-3 bg-white rounded shadow-sm" id="more_blog" current_page="1">
    <h6 class="border-bottom border-gray pb-2 mb-0">最近更新</h6>
  </div>

</main>
  </article>
{% endblock %}